<source>
  @type forward
  port 24224
  read_from_head true
<parse>
@type multi_format
<pattern>
format json
time_key time
time_format %Y-%m-%dT%H:%M:%S.%NZ
</pattern>
<pattern>
format /^(?<time>.+) (?<stream>stdout|stderr) [^ ]* (?<log>.*)$/
time_format %Y-%m-%dT%H:%M:%S.%N%:z
</pattern>
</parse>
</source>
<filter *.**>
  @type parser
  format json
  key_name log
  reserve_data true
</filter>
<match *.**>
  @type stdout
  @type elasticsearch
  include_tag_key true
  host riq-prod-logs.es.us-west-2.aws.found.io
  user elastic
  password rjhQ8PHhT0VVgxAmgJPzCKQP
  port 9243
  scheme https
  ssl_verify true
  ssl_version TLSv1_2
  logstash_format true
  logstash_dateformat "%Y%m%d"
  reload_connections true
  logstash_prefix logstash
  logstash_format true
  <buffer>
    flush_thread_count 8
    flush_interval 5s
    chunk_limit_size 10M
    queue_limit_length 32
    retry_max_interval 30
    flush_mode interval
    retry_forever true
  </buffer>
</match>
